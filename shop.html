<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Garden de La Selva</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      background: #000;
      font-family: sans-serif;
      overflow: hidden;
    }

    #background-video {
      position: fixed;
      right: 0;
      bottom: 0;
      min-width: 100%;
      min-height: 100%;
      z-index: -1;
      object-fit: cover;
    }

    .info-link {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      color: white;
      text-decoration: none;
      font-size: 16px;
      z-index: 999;
    }

    .floating-player {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: rgba(0, 0, 0, 0.4); /* very transparent dark */
      color: white;
      font-size: 14px;
      z-index: 1000;
      transition: transform 0.3s ease;
    }

    .player-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      background: rgba(0, 0, 0, 0.2);
      cursor: pointer;
    }

    .player-body {
      padding: 10px;
    }

    .centered-play-button {
      text-align: center;
      margin: 10px 0;
    }

    #progressBarContainer {
      width: 100%;
      height: 5px;
      background: rgba(255, 255, 255, 0.2);
    }

    #progressBar {
      width: 0%;
      height: 100%;
      background: white;
    }

    #trackList {
      list-style: none;
      padding: 0;
      margin: 10px 0 0 0;
      max-height: 100px;
      overflow-y: auto;
    }

    #trackList li {
      padding: 5px 0;
    }

    svg {
      cursor: pointer;
    }
  </style>
</head>
<body>

  <!-- Background Video -->
  <video autoplay muted loop playsinline id="background-video">
    <source src="shop.mp4" type="video/mp4" />
  </video>

  <!-- +info link -->
  <a href="https://info.discosuluulu.com" class="info-link">+info</a>

  <!-- Floating Player -->
  <div class="floating-player" id="audioPlayer">
    <div class="player-header" onclick="togglePlayer()">
      <span id="playerTitle">Garden de La Selva – Shaped by shakers grown from okra harvests</span>
      <span id="toggleButton">−</span>
    </div>
    <div class="player-body">
      <div class="centered-play-button">
        <svg id="playIcon" viewBox="0 0 100 100" width="60" height="60" onclick="togglePlay()">
          <circle cx="50" cy="50" r="45" fill="#ffffffcc" />
          <polygon id="playTriangle" points="40,30 70,50 40,70" fill="#000" />
        </svg>
      </div>
      <div id="progressBarContainer"><div id="progressBar"></div></div>
      <ul id="trackList"></ul>
    </div>
  </div>

  <script>
    const tracks = [
      { title: "01. Que Gata", duration: "2:13", url: "https://raw.githubusercontent.com/discosuluulu/Otucan/main/01_Que%20Gata.mp3" },
      { title: "02. Mi Amor", duration: "1:58", url: "https://raw.githubusercontent.com/discosuluulu/Otucan/main/02_Mi%20Amor.mp3" },
      { title: "03. Forget the rest", duration: "2:01", url: "https://raw.githubusercontent.com/discosuluulu/Otucan/main/03_Forget%20the%20rest.mp3" },
      { title: "04. Highlife", duration: "2:06", url: "https://raw.githubusercontent.com/discosuluulu/Otucan/main/04_Highlife.mp3" },
      { title: "05. Voy Pal Agua", duration: "2:22", url: "https://raw.githubusercontent.com/discosuluulu/Otucan/main/05_Voy%20Pal%20Agua.mp3" },
      { title: "06. Have ya had a Lemon", duration: "2:20", url: "https://raw.githubusercontent.com/discosuluulu/Otucan/main/06_Have%20ya%20had%20a%20Lemon.mp3" },
      { title: "07. Move ya body", duration: "1:56", url: "https://raw.githubusercontent.com/discosuluulu/Otucan/main/07_Move%20ya%20body.mp3" },
      { title: "08. Bom día", duration: "1:43", url: "https://raw.githubusercontent.com/discosuluulu/Otucan/main/08_Bom%20dia.mp3" },
      { title: "09. Ya", duration: "2:03", url: "https://raw.githubusercontent.com/discosuluulu/Otucan/main/09_Ya.mp3" },
      { title: "10. Que disfrutes", duration: "3:08", url: "https://raw.githubusercontent.com/discosuluulu/Otucan/main/10_Que%20disfrutes.mp3" },
    ];

    let currentTrack = 0;
    let isPlaying = false;

    const audio = new Audio();
    audio.src = tracks[currentTrack].url;

    const playIcon = document.getElementById("playIcon");
    const playTriangle = document.getElementById("playTriangle");
    const progressBar = document.getElementById("progressBar");
    const trackList = document.getElementById("trackList");

    function renderTrackList() {
      tracks.forEach((track, index) => {
        const li = document.createElement("li");
        li.textContent = `${track.title} – ${track.duration}`;
        li.addEventListener("click", () => {
          currentTrack = index;
          playTrack();
        });
        trackList.appendChild(li);
      });
    }

    function togglePlay() {
      if (isPlaying) {
        audio.pause();
        playTriangle.setAttribute("points", "40,30 70,50 40,70"); // play
      } else {
        audio.play();
        playTriangle.setAttribute("points", "38,30 45,30 45,70 38,70 55,30 62,30 62,70 55,70"); // pause bars
      }
      isPlaying = !isPlaying;
    }

    function playTrack() {
      audio.src = tracks[currentTrack].url;
      audio.play();
      isPlaying = true;
      playTriangle.setAttribute("points", "38,30 45,30 45,70 38,70 55,30 62,30 62,70 55,70");
    }

    function togglePlayer() {
      const body = document.querySelector(".player-body");
      const toggle = document.getElementById("toggleButton");
      if (body.style.display === "none") {
        body.style.display = "block";
        toggle.textContent = "−";
      } else {
        body.style.display = "none";
        toggle.textContent = "+";
      }
    }

    audio.addEventListener("timeupdate", () => {
      const progress = (audio.currentTime / audio.duration) * 100;
      progressBar.style.width = `${progress}%`;
    });

    audio.addEventListener("ended", () => {
      currentTrack = (currentTrack + 1) % tracks.length;
      playTrack();
    });

    renderTrackList();
  </script>
</body>
</html>
